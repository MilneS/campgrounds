(this.webpackJsonpcampgrounds=this.webpackJsonpcampgrounds||[]).push([[0],{10:function(e,t,a){e.exports={container:"Details_container__2Oj6o",cardButtons:"Details_cardButtons__1mp0R",img:"Details_img__2FBxc",title:"Details_title__OugfD",DescrAuthPrice:"Details_DescrAuthPrice__34iBY",location:"Details_location__3rk2w",reviewContainer:"Details_reviewContainer__3WnDJ",titleReview:"Details_titleReview__3SPSe",textareaTitle:"Details_textareaTitle__2cjpH",textarea:"Details_textarea__2nz_6",reviewCard:"Details_reviewCard__2K-Uh",card:"Details_card__25dEN",NoCommentsMsg:"Details_NoCommentsMsg__1eNcn",warning:"Details_warning__EDbfE",reviewBtn:"Details_reviewBtn__2Cpwn",submitReviewBtn:"Details_submitReviewBtn__1mndp",deleteReviewButton:"Details_deleteReviewButton__GZ1DP",loadingCont:"Details_loadingCont__3ySv3",loading:"Details_loading__3GUXD",authorReview:"Details_authorReview__2U1bi"}},23:function(e,t,a){e.exports={background:"Home_background__3HbSX",middleContainer:"Home_middleContainer__qPjjp",title:"Home_title__3h164",message:"Home_message__3Y9k4",homeButton:"Home_homeButton__QywTi"}},27:function(e,t,a){e.exports={container:"CampsCard_container__e7ffi",img:"CampsCard_img__3sxmh",containerInfo:"CampsCard_containerInfo__3JXPw",title:"CampsCard_title__1tu2g",description:"CampsCard_description__38J2C",location:"CampsCard_location__19D1b",button:"CampsCard_button__1Jnu4"}},28:function(e,t,a){e.exports={navbar:"NavbarComp_navbar__2raUi",campgroundsLogo:"NavbarComp_campgroundsLogo__3Wnzz",campgroundsLink:"NavbarComp_campgroundsLink__c5qYo",loginLink:"NavbarComp_loginLink__152zl",active:"NavbarComp_active__KQnEd"}},38:function(e,t,a){e.exports={container:"Camps_container__2FW0O",h1:"Camps_h1__7jZsE",button:"Camps_button__3Z1wg",loading:"Camps_loading__de6is",titleContainer:"Camps_titleContainer__3KJQ3"}},39:function(e,t,a){e.exports={login:"LoginComp_login__2Nr3o",signUp:"LoginComp_signUp__3pJBo",errorMsg:"LoginComp_errorMsg__2oOW3",loginBtn:"LoginComp_loginBtn__wWWF6",card:"LoginComp_card__2mGIf"}},40:function(e,t,a){e.exports={signup:"SignupComp_signup__1F1p1",login:"SignupComp_login__2CWFt",errorMsg:"SignupComp_errorMsg__3DF0s",signupBtn:"SignupComp_signupBtn__2ghD2",card:"SignupComp_card__1arrs"}},41:function(e,t,a){e.exports={container:"NewCamp_container__1i68C",form:"NewCamp_form__2zNpO",h1:"NewCamp_h1__2iugb",file:"NewCamp_file__1i_Fo",button:"NewCamp_button__3TkYp"}},43:function(e,t,a){e.exports={container:"Edit_container__1s2P1",form:"Edit_form__UvPpR",h1:"Edit_h1__3kTf6",button:"Edit_button__3vqQL"}},55:function(e,t,a){e.exports={cardContainer:"Login_cardContainer__nypt3",card:"Login_card__1SygN"}},69:function(e,t,a){},89:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(25),i=a.n(s),r=(a(69),a(13)),o=a(11),l=a(23),d=a.n(l),m=a(1),j=function(){return Object(m.jsx)("div",{className:d.a.background,children:Object(m.jsxs)("div",{className:d.a.main,children:[Object(m.jsx)("div",{className:d.a.nav,children:Object(m.jsxs)("ul",{className:d.a.ul,children:[Object(m.jsx)("div",{className:d.a.logolink,children:"CampGrounds"}),Object(m.jsx)(r.c,{to:"/campgrounds/camps",className:d.a.link,children:"All campgrounds"}),Object(m.jsx)(r.c,{to:"/campgrounds/login",className:d.a.loginLink,children:"Login"})]})}),Object(m.jsxs)("div",{className:d.a.middleContainer,children:[Object(m.jsx)("h1",{className:d.a.title,children:"CampGrounds"}),Object(m.jsx)("div",{className:d.a.message,children:Object(m.jsxs)("p",{children:["Welcome to CampGrounds! ",Object(m.jsx)("br",{}),"Jump right in and explore our many campgrounds. ",Object(m.jsx)("br",{})," Login or sign up to share some of your own and comment on others!"]})}),Object(m.jsx)(r.c,{to:"/campgrounds/camps",children:Object(m.jsx)("button",{className:d.a.homeButton,children:"View Campgrounds"})})]})]})})},u=a(14),p=a.n(u),b=a(21),g=a(7),O=a(38),h=a.n(O),f=a(8),x=a(27),_=a.n(x),v=a(15),C=a(59),N=(a(90),a(84),C.initializeApp({apiKey:"AIzaSyA__aSBSBV8ngRKTKlRmTf7z-_ba-3ra5w",databaseURL:"https://camps-179f7-default-rtdb.firebaseio.com/",authDomain:"camps-179f7.firebaseapp.com",projectId:"camps-179f7",storageBucket:"camps-179f7.appspot.com",messagingSenderId:"769918566831",appId:"1:769918566831:web:e4d9533932010888a3af5a",measurementId:"G-6SXNYVFD37"})),y=function(e){var t=Object(n.useState)(),a=Object(g.a)(t,2),c=a[0],s=a[1],i=e.item,o=e.dataKey;return Object(n.useEffect)((function(){N.storage().ref().child("images/".concat(o)).getDownloadURL().then((function(e){s(e)})).catch((function(e){return console.log("Getting image failed on campCard ".concat(JSON.stringify(e.message)))}))}),[e.item]),Object(m.jsxs)("div",{className:_.a.container,children:[Object(m.jsx)("div",{className:_.a.containerImg,children:Object(m.jsx)("img",{src:c,alt:"",className:_.a.img})}),Object(m.jsxs)("div",{className:_.a.containerInfo,children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:_.a.title,children:i.title}),Object(m.jsx)("div",{className:_.a.description,children:i.description}),Object(m.jsx)("div",{className:_.a.location,children:i.location})]}),Object(m.jsx)("div",{children:Object(m.jsx)(r.c,{to:"/campgrounds/details/".concat(o),children:Object(m.jsx)(v.a,{variant:"primary",size:"lg",type:"button",className:_.a.button,children:"View"})})})]})]})},w=function(){var e=Object(n.useState)("/campgrounds/login"),t=Object(g.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!1),i=Object(g.a)(s,2),o=i[0],l=i[1],d=Object(f.b)(),j=Object(f.c)((function(e){return e.isLoggedin})),u=Object(f.c)((function(e){return e.allCamps})),O=function(){var e=Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://camps-179f7-default-rtdb.firebaseio.com/campgrounds.json",l(!0),e.next=4,fetch("https://camps-179f7-default-rtdb.firebaseio.com/campgrounds.json",{method:"GET"});case 4:if(!(t=e.sent).ok){e.next=13;break}return e.next=8,t.json();case 8:a=e.sent,d({type:"setAllCamps",payload:a}),l(!1),e.next=15;break;case 13:"Getting all camps failed!",console.log("Getting all camps failed!");case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){O()}),[]);return Object(n.useEffect)((function(){c(j?"/campgrounds/newcamp":"/campgrounds/login")}),[]),Object(m.jsxs)("div",{className:h.a.container,children:[Object(m.jsxs)("div",{className:h.a.titleContainer,children:[Object(m.jsx)("h1",{className:h.a.h1,children:"All CampGrounds"}),Object(m.jsx)("div",{children:Object(m.jsx)(r.c,{to:a,children:Object(m.jsx)(v.a,{variant:"success",size:"lg",type:"button",className:h.a.button,children:"Add Campground"})})})]}),o&&Object(m.jsx)("div",{className:h.a.loading,children:"Loading..."}),function(){if(Object.keys(u).length)return Object.keys(u).map((function(e,t){return Object(m.jsx)(y,{item:u[e],dataKey:e},t)}))}()]})},k=a(55),S=a.n(k),D=a(9),L=a(2),T=a(39),F=a.n(T),B=a.p+"static/media/LoginPic.e44accc1.jpeg",I=a(16),G=a(6),E=function(){var e=Object(n.useState)({email:"",password:""}),t=Object(g.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(),i=Object(g.a)(s,2),r=i[0],l=i[1],d=Object(n.useState)(!1),j=Object(g.a)(d,2),u=j[0],O=j[1],h=Object(f.c)((function(e){return e.logginFromCamps})),x=Object(o.g)(),_=Object(f.b)(),C=function(e){c(Object(L.a)(Object(L.a)({},a),{},Object(D.a)({},e.target.id,e.currentTarget.value)))},N=function(){var e=Object(b.a)(p.a.mark((function e(){var t,n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyA__aSBSBV8ngRKTKlRmTf7z-_ba-3ra5w",e.next=3,fetch("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyA__aSBSBV8ngRKTKlRmTf7z-_ba-3ra5w",{method:"POST",body:JSON.stringify({email:a.email,password:a.password,returnSecureToken:!0}),headers:{"Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:if(n=e.sent,!t.ok){e.next=17;break}return _({type:"loggedin"}),_({type:"idToken",payload:n.idToken}),localStorage.setItem("token",n.idToken),localStorage.setItem("userEmail",n.email),h?x.replace("/campgrounds/newcamp"):(x.push("/campgrounds/camps"),_({type:"logoutFromCampsBtn"})),O(!1),e.abrupt("return",n);case 17:n&&n.error&&n.error.message&&(c=n.error.message,l(c),O(!0));case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(I.a,{style:{width:"27rem"},className:F.a.card,children:[Object(m.jsx)(I.a.Img,{variant:"top",src:B}),Object(m.jsxs)(I.a.Body,{children:[Object(m.jsx)(I.a.Title,{className:"mb-4",children:Object(m.jsx)("p",{className:F.a.login,children:"Login"})}),u&&Object(m.jsx)("p",{className:F.a.errorMsg,children:r}),Object(m.jsxs)(G.a,{children:[Object(m.jsx)(G.a.Group,{className:"mb-3",children:Object(m.jsx)(G.a.Control,{id:"email",type:"email",placeholder:"Enter email",onChange:C})}),Object(m.jsx)(G.a.Group,{className:"mb-3",children:Object(m.jsx)(G.a.Control,{id:"password",type:"password",placeholder:"Password",onChange:C})}),Object(m.jsx)("div",{className:"d-grid gap-2",children:Object(m.jsx)(v.a,{onClick:function(e){e.preventDefault(),_({type:"loginFormData",payload:a}),N()},variant:"success",size:"lg",type:"submit",className:F.a.loginBtn,children:"Login"})})]}),Object(m.jsx)("p",{className:F.a.signUp,onClick:function(e){e.preventDefault(),_({type:"signupComp"})},children:"Or sign up."})]})]})})},R=a(40),A=a.n(R),z=function(){var e=Object(n.useState)({email:"",password:""}),t=Object(g.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(),i=Object(g.a)(s,2),r=i[0],l=i[1],d=Object(n.useState)(!1),j=Object(g.a)(d,2),u=j[0],O=j[1],h=Object(f.c)((function(e){return e.logginFromCamps})),x=Object(f.b)(),_=Object(o.g)(),C=function(e){c(Object(L.a)(Object(L.a)({},a),{},Object(D.a)({},e.target.id,e.currentTarget.value)))},N=function(){var e=Object(b.a)(p.a.mark((function e(){var t,n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyA__aSBSBV8ngRKTKlRmTf7z-_ba-3ra5w",e.next=3,fetch("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyA__aSBSBV8ngRKTKlRmTf7z-_ba-3ra5w",{method:"POST",body:JSON.stringify({email:a.email,password:a.password,returnSecureToken:!0}),headers:{"Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:if(n=e.sent,!t.ok){e.next=17;break}return x({type:"loggedin"}),x({type:"idToken",payload:n.idToken}),localStorage.setItem("token",n.idToken),localStorage.setItem("userEmail",n.email),h?_.replace("/campgrounds/newcamp"):(_.push("/campgrounds/camps"),x({type:"logoutFromCampsBtn"})),O(!1),e.abrupt("return",n);case 17:n&&n.error&&n.error.message&&(c=n.error.message,l(c),O(!0));case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(I.a,{style:{width:"27rem"},className:A.a.card,children:[Object(m.jsx)(I.a.Img,{variant:"top",src:B}),Object(m.jsxs)(I.a.Body,{children:[Object(m.jsx)(I.a.Title,{className:"mb-4",children:Object(m.jsx)("p",{className:A.a.signup,children:"Sign up"})}),u&&Object(m.jsx)("p",{className:A.a.errorMsg,children:r}),Object(m.jsxs)(G.a,{children:[Object(m.jsx)(G.a.Group,{className:"mb-3",children:Object(m.jsx)(G.a.Control,{type:"email",id:"email",placeholder:"Email",onChange:C})}),Object(m.jsx)(G.a.Group,{className:"mb-3",children:Object(m.jsx)(G.a.Control,{type:"password",id:"password",placeholder:"Password",onChange:C})}),Object(m.jsx)("div",{className:"d-grid gap-2",children:Object(m.jsx)(v.a,{onClick:function(e){e.preventDefault(),x({type:"loginFormData",payload:a}),N()},variant:"success",size:"lg",type:"submit",className:A.a.signupBtn,children:"Sign up"})})]}),Object(m.jsx)("p",{className:A.a.login,onClick:function(e){e.preventDefault(),x({type:"loginComp"})},children:"Or login."})]})]})})},P=function(){var e=Object(f.c)((function(e){return e.showLogin})),t=Object(f.c)((function(e){return e.showSignup}));return Object(m.jsx)("div",{className:S.a.cardContainer,children:Object(m.jsxs)("div",{className:S.a.card,children:[e&&Object(m.jsx)(E,{}),t&&Object(m.jsx)(z,{})]})})},K=a(41),U=a.n(K),V=function(){var e=localStorage.getItem("userEmail"),t=Object(o.g)(),a=Object(f.c)((function(e){return e.loginFormData})),c={title:"",location:"",price:"",description:"",author:e||a.email},s=Object(n.useState)(c),i=Object(g.a)(s,2),r=i[0],l=i[1],d=Object(n.useState)(),j=Object(g.a)(d,2),u=j[0],O=j[1],h=Object(n.useState)(!1),x=Object(g.a)(h,2),_=x[0],C=x[1],y=Object(n.useState)(!1),w=Object(g.a)(y,2),k=w[0],S=w[1],T=function(){var t=Object(b.a)(p.a.mark((function t(){var n,c,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://camps-179f7-default-rtdb.firebaseio.com/campgrounds.json",t.next=3,fetch("https://camps-179f7-default-rtdb.firebaseio.com/campgrounds.json",{method:"POST",body:JSON.stringify({title:r.title,location:r.location,price:r.price,description:r.description,author:e||a.email})});case 3:if(!(n=t.sent).ok){t.next=12;break}return t.next=7,n.json();case 7:return c=t.sent,s=c.name,t.abrupt("return",s);case 12:"Adding new camp failed!",console.log("Adding new camp failed!");case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),F=function(e){l(Object(L.a)(Object(L.a)({},r),{},Object(D.a)({},e.target.id,e.target.value)))};return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:U.a.container,children:[Object(m.jsx)("h1",{className:U.a.h1,children:"New CampGround"}),Object(m.jsxs)(G.a,{className:U.a.form,noValidate:!0,validated:_,children:[Object(m.jsxs)(G.a.Group,{className:"mb-3",children:[Object(m.jsx)(G.a.Label,{htmlFor:"title",children:"Title"}),Object(m.jsx)(G.a.Control,{type:"text",id:"title",onChange:F,required:!0})]}),Object(m.jsxs)(G.a.Group,{className:"mb-3",children:[Object(m.jsx)(G.a.Label,{htmlFor:"location",children:"Location"}),Object(m.jsx)(G.a.Control,{type:"text",id:"location",onChange:F,required:!0})]}),Object(m.jsxs)(G.a.Group,{className:"mb-3",children:[Object(m.jsx)(G.a.Label,{htmlFor:"price",children:"Campground price"}),Object(m.jsx)(G.a.Control,{type:"number",id:"price",onChange:F,required:!0})]}),Object(m.jsxs)(G.a.Group,{className:"mb-3",children:[Object(m.jsx)(G.a.Label,{htmlFor:"description",children:"Description"}),Object(m.jsx)(G.a.Control,{as:"textarea",rows:3,id:"description",onChange:F,required:!0})]}),Object(m.jsx)(G.a.Group,{children:Object(m.jsx)(G.a.Control,{type:"file",className:U.a.file,id:"image",onChange:function(e){if(e.target.files&&e.target.files[0]){var t=e.target.files[0];t&&O(t)}},required:!0})}),Object(m.jsxs)("div",{className:U.a.button,children:[Object(m.jsx)(v.a,{onClick:function(e){e.preventDefault(),S(!0),T().then((function(e){if(u&&u.name){var a=N.storage().ref();u.dataKey=e,a.child("images/".concat(u.dataKey)).put(u).then((function(){t.push("/campgrounds/camps")}))}})),!1===e.target.checkValidity()&&e.stopPropagation(),C(!0)},variant:"success",size:"lg",type:"button",className:"mb-3",disabled:k,children:"Add campground"}),Object(m.jsx)(v.a,{onClick:function(e){t.push("/campgrounds/camps")},variant:"secondary",size:"lg",type:"button",className:"mb-3",children:"Cancel"})]})]})]})})},J=a(28),M=a.n(J),W=a(47),q=a(64),H=a(60),Y=function(){var e=Object(n.useState)(!1),t=Object(g.a)(e,2),a=t[0],c=t[1],s=Object(f.b)(),i=Object(f.c)((function(e){return e.isLoggedin})),o=function(){s({type:"logoutFromCampsBtn"}),c(!1),s({type:"detailsComp"})};return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(W.a,{fixed:"top",collapseOnSelect:!0,expand:"lg",expanded:a,bg:"dark",variant:"dark",className:M.a.navbar,children:Object(m.jsxs)(H.a,{children:[Object(m.jsx)(r.c,{to:"/campgrounds",className:M.a.campgroundsLogo,onClick:o,children:"CampGrounds"}),Object(m.jsx)(W.a.Toggle,{"aria-controls":"basic-navbar-nav",onClick:function(){c(!a)}}),Object(m.jsx)(W.a.Collapse,{id:"basic-navbar-nav",children:Object(m.jsxs)(q.a,{className:"me-auto",children:[Object(m.jsx)(r.c,{onClick:o,to:"/campgrounds/camps",id:"all",className:M.a.campgroundsLink,activeClassName:M.a.active,children:"All campgrounds"}),!i&&Object(m.jsx)(r.c,{to:"/campgrounds/login",id:"login",className:M.a.loginLink,activeClassName:M.a.active,onClick:function(){s({type:"loginComp"}),c(!1)},children:"Login"}),i&&Object(m.jsx)(r.c,{to:"/campgrounds/login",id:"login",className:M.a.loginLink,activeClassName:M.a.active,onClick:function(){s({type:"loggedout"}),s({type:"getToken",token:null}),s({type:"loginComp"}),localStorage.removeItem("token"),localStorage.removeItem("userEmail"),c(!1)},children:"Logout"})]})})]})})})},Q=a(10),X=a.n(Q),Z=a(43),$=a.n(Z),ee=function(e){var t=e.campId,a=e.getCampFunc,c=e.campData,s={title:c.title,location:c.location,price:c.price,description:c.description},i=Object(n.useState)(s),r=Object(g.a)(i,2),o=r[0],l=r[1],d=Object(f.b)(),j=function(e){l(Object(L.a)(Object(L.a)({},o),{},Object(D.a)({},e.target.id,e.target.value)))};return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:$.a.container,children:[Object(m.jsx)("h1",{className:$.a.h1,children:"Update CampGround"}),Object(m.jsxs)(G.a,{className:$.a.form,children:[Object(m.jsxs)(G.a.Group,{className:"mb-3",children:[Object(m.jsx)(G.a.Label,{htmlFor:"title",children:"Title"}),Object(m.jsx)(G.a.Control,{type:"text",id:"title",defaultValue:c.title,onChange:j})]}),Object(m.jsxs)(G.a.Group,{className:"mb-3",children:[Object(m.jsx)(G.a.Label,{htmlFor:"location",children:"Location"}),Object(m.jsx)(G.a.Control,{type:"text",id:"location",defaultValue:c.location,onChange:j})]}),Object(m.jsxs)(G.a.Group,{className:"mb-3",children:[Object(m.jsx)(G.a.Label,{htmlFor:"price",children:"Campground price"}),Object(m.jsx)(G.a.Control,{type:"number",id:"price",defaultValue:c.price,onChange:j})]}),Object(m.jsxs)(G.a.Group,{className:"mb-4",children:[Object(m.jsx)(G.a.Label,{htmlFor:"description",children:"Description"}),Object(m.jsx)(G.a.Control,{as:"textarea",rows:3,id:"description",defaultValue:c.description,onChange:j})]}),Object(m.jsxs)("div",{className:$.a.button,children:[Object(m.jsx)(v.a,{onClick:function(e){N.database().ref().child("campgrounds/".concat(t)).update({title:o.title,location:o.location,price:o.price,description:o.description}).then((function(){d({type:"updateCamp",payload:t,payloadData:{title:o.title,location:o.location,price:o.price,description:o.description}}),d({type:"detailsComp"}),a()})).catch((function(e){console.log(e)}))},variant:"success",size:"lg",type:"button",className:"mb-3",children:"Update"}),Object(m.jsx)(v.a,{onClick:function(e){d({type:"detailsComp"})},variant:"secondary",size:"lg",type:"button",className:"mb-3",children:"Cancel"})]})]})]})})},te=a(62),ae=a(37),ne=function(){var e=localStorage.getItem("userEmail"),t=localStorage.getItem("userEmail"),a=Object(o.g)(),c=Object(f.b)(),s=Object(o.h)(),i=Object(f.c)((function(e){return e.loginFormData})),r=Object(f.c)((function(e){return e.allCamps})),l=Object(f.c)((function(e){return e.showEdit})),d=Object(f.c)((function(e){return e.isLoggedin})),j={comment:"",author:e||i.email,id:""},u=Object(n.useState)(!1),O=Object(g.a)(u,2),h=O[0],x=O[1],_=Object(n.useState)(""),C=Object(g.a)(_,2),y=C[0],w=C[1],k=Object(n.useState)(!1),S=Object(g.a)(k,2),T=S[0],F=S[1],B=Object(n.useState)(""),E=Object(g.a)(B,2),R=E[0],A=E[1],z=Object(n.useState)([]),P=Object(g.a)(z,2),K=P[0],U=P[1],V=Object(n.useState)(),J=Object(g.a)(V,2),M=J[0],W=J[1],q=Object(n.useState)(j),H=Object(g.a)(q,2),Y=H[0],Q=H[1],Z=Object(n.useState)({author:"",description:"",location:"",price:"",title:"",comments:{}}),$=Object(g.a)(Z,2),ne=$[0],ce=$[1],se=Object(n.useState)(!1),ie=Object(g.a)(se,2),re=ie[0],oe=ie[1],le=function(){var e=Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://camps-179f7-default-rtdb.firebaseio.com/campgrounds.json",e.next=3,fetch("https://camps-179f7-default-rtdb.firebaseio.com/campgrounds.json",{method:"GET"});case 3:if(!(t=e.sent).ok){e.next=11;break}return e.next=7,t.json();case 7:a=e.sent,c({type:"setAllCamps",payload:a}),e.next=13;break;case 11:"Getting all camps failed!",console.log("Getting all camps failed!");case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){if(Object.keys(r).length){var e=Object.keys(r).find((function(e){return e===s.camp}));e&&(ce(r[e]),A(e))}}),[r]),Object(n.useEffect)((function(){le(),function(){var e;e=N.storage().ref().child("images/".concat(s.camp)),oe(!0),e.getDownloadURL().then((function(e){W(e),oe(!1)}))}()}),[]);Object(n.useEffect)((function(){var e=[],t=ne.comments;for(var a in t){var n=Object(L.a)(Object(L.a)({},t[a]),{},{id:a});e.push(n)}U(e)}),[ne]);var de=function(){var t=Object(b.a)(p.a.mark((function t(){var a,n,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a="".concat("https://camps-179f7-default-rtdb.firebaseio.com/campgrounds/").concat(R,"/comments.json")||!1,!Y.comment.trim().length){t.next=15;break}return t.next=4,fetch(a,{method:"POST",body:JSON.stringify({author:e||i.email,comment:Y.comment})});case 4:if(!(n=t.sent).ok){t.next=13;break}return t.next=8,n.json();case 8:return c=t.sent,le(),t.abrupt("return",c);case 13:"Adding new camp failed!",console.log("Adding new camp failed!");case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),me=function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),F(!0),w(""),e.next=5,de();case 5:Q(j),F(!1),!1===t.target.checkValidity()&&t.stopPropagation(),x(!0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=N.database().ref(),n=t.currentTarget.id,e.next=4,a.child("campgrounds/".concat(s.camp,"/comments/").concat(n)).remove();case 4:le();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)(m.Fragment,{children:[re&&Object(m.jsx)("div",{className:X.a.loadingCont,children:Object(m.jsx)("div",{className:X.a.loading,children:"Loading..."})}),!re&&Object(m.jsxs)("div",{children:[!l&&ne&&Object(m.jsxs)("div",{className:X.a.container,children:[Object(m.jsxs)("div",{children:[t===ne.author&&Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:X.a.cardButtons,children:[Object(m.jsx)(v.a,{variant:"primary",type:"button",className:X.a.reviewBtn,size:"lg",onClick:function(e){c({type:"editComp"})},children:"Update"}),Object(m.jsx)(v.a,{variant:"danger",type:"button",className:X.a.reviewBtn,size:"lg",onClick:function(e){var t,n=N.database().ref();t=N.storage().ref(),oe(!0),n.child("campgrounds/".concat(s.camp)).remove(),t.child("images/".concat(s.camp)).delete().then((function(){c({type:"removeCamp",payload:s.camp}),a.replace("/campgrounds/camps")})).catch((function(e){console.log("error")}))},children:"Delete"})]})}),Object(m.jsx)("div",{className:X.a.card,children:Object(m.jsxs)(I.a,{style:{width:"40rem"},children:[Object(m.jsx)(I.a.Img,{variant:"top",src:M}),Object(m.jsxs)(I.a.Body,{children:[Object(m.jsx)(I.a.Title,{className:X.a.title,children:ne.title}),Object(m.jsx)(I.a.Text,{className:X.a.DescrAuthPrice,children:ne.description})]}),Object(m.jsxs)(te.a,{className:"list-group-flush",children:[Object(m.jsx)(ae.a,{className:X.a.location,children:ne.location}),Object(m.jsxs)(ae.a,{className:X.a.DescrAuthPrice,children:["Submitted by ",ne.author]}),Object(m.jsxs)(ae.a,{className:X.a.DescrAuthPrice,children:["Price/night: $",ne.price]})]})]})})]}),Object(m.jsxs)("div",{className:X.a.reviewContainer,children:[d&&Object(m.jsx)("h1",{className:X.a.titleReview,children:"Leave a review"}),!d&&Object(m.jsx)("h1",{className:X.a.titleReview,children:"Reviews"}),d&&Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{className:X.a.textareaTitle,children:"Review text"}),Object(m.jsxs)(G.a,{className:X.a.reviewForm,noValidate:!0,validated:h,children:[Object(m.jsx)(G.a.Group,{className:"mb-3",children:Object(m.jsx)(G.a.Control,{as:"textarea",rows:3,id:"comment",onChange:function(e){Q(Object(L.a)(Object(L.a)({},Y),{},Object(D.a)({},e.target.id,e.target.value))),w(e.target.value)},value:y,required:!0})}),Object(m.jsx)(v.a,{variant:"success",size:"lg",type:"submit",className:X.a.submitReviewBtn,onClick:me,disabled:T,children:"Submit"})]})]}),K.length<=0&&Object(m.jsx)("div",{className:X.a.NoCommentsMsg,children:"No reviews available."}),Object(m.jsx)("div",{className:X.a.commCont,children:K.length>0&&K.map((function(e,a){return Object(m.jsxs)(I.a,{className:X.a.reviewCard,children:[Object(m.jsx)(I.a.Title,{className:X.a.authorReview,children:e.author}),Object(m.jsx)(I.a.Text,{children:e.comment}),t===e.author&&Object(m.jsx)("div",{children:Object(m.jsx)(v.a,{variant:"danger",type:"button",className:X.a.deleteReviewButton,onClick:je,id:e.id,children:"Delete"})})]},a)}))})]})]}),l&&Object(m.jsx)(ee,{campData:ne,campId:R,getCampFunc:le})]})]})};var ce=function(){var e=Object(f.c)((function(e){return e.isLoggedin}));return Object(m.jsx)(r.b,{basename:"/",children:Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(Y,{}),Object(m.jsxs)(o.d,{children:[Object(m.jsx)(o.b,{path:"/campgrounds",exact:!0,children:Object(m.jsx)(j,{})}),Object(m.jsx)(o.b,{path:"/campgrounds/camps",children:Object(m.jsx)(w,{})}),Object(m.jsx)(o.b,{path:"/campgrounds/details/:camp",children:Object(m.jsx)(ne,{})}),Object(m.jsxs)(o.b,{path:"/campgrounds/newcamp",children:[e&&Object(m.jsx)(V,{}),!e&&Object(m.jsx)(o.a,{to:"/campgrounds/login"})]}),Object(m.jsx)(o.b,{path:"/campgrounds/login",children:Object(m.jsx)(P,{})}),Object(m.jsx)(o.b,{path:"*",children:Object(m.jsx)(o.a,{to:"/campgrounds"})})]})]})})},se=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,92)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),s(e),i(e)}))},ie=(a(88),a(63)),re={showLogin:!0,showSignup:!1,showEdit:!1,showDetails:!0,loginFormData:{email:"",password:""},idToken:localStorage.getItem("token")||"",userId:localStorage.getItem("userId")||"",isLoggedin:!!localStorage.getItem("token"),logginFromCamps:!1,allCamps:{}},oe=Object(ie.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"loginComp":return Object(L.a)(Object(L.a)({},e),{},{showLogin:!0,showSignup:!1});case"signupComp":return Object(L.a)(Object(L.a)({},e),{},{showSignup:!0,showLogin:!1});case"detailsComp":return Object(L.a)(Object(L.a)({},e),{},{showDetails:!0,showEdit:!1});case"editComp":return Object(L.a)(Object(L.a)({},e),{},{showEdit:!0,showDetails:!1});case"signupFormData":return Object(L.a)(Object(L.a)({},e),{},{signUpFormData:t.payload});case"loginFormData":return Object(L.a)(Object(L.a)({},e),{},{loginFormData:t.payload});case"loggedin":return Object(L.a)(Object(L.a)({},e),{},{isLoggedin:!0});case"loggedout":return Object(L.a)(Object(L.a)({},e),{},{isLoggedin:!1,loginFormData:null});case"logginFromCampsBtn":return Object(L.a)(Object(L.a)({},e),{},{logginFromCamps:!0});case"logoutFromCampsBtn":return Object(L.a)(Object(L.a)({},e),{},{logginFromCamps:!1});case"setAllCamps":return Object(L.a)(Object(L.a)({},e),{},{allCamps:t.payload});case"removeCamp":var a=e.allCamps;return delete a[t.payload],Object(L.a)(Object(L.a)({},e),{},{allCamps:a});case"updateCamp":var n=e.allCamps;return n[t.payload]=t.payloadData,Object(L.a)(Object(L.a)({},e),{},{allCamps:n});case"getToken":return Object(L.a)(Object(L.a)({},e),{},{idToken:t.payload});default:return e}})),le=oe;i.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(f.a,{store:le,children:Object(m.jsx)(r.a,{children:Object(m.jsx)(ce,{})})})}),document.getElementById("root")),se()}},[[89,1,2]]]);
//# sourceMappingURL=main.3a86ac2a.chunk.js.map